<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

<nav class="navbar navbar-expand-lg navbar-custom" style="background-color: #3778c2;">
  <div class="container-fluid">
    <a class="p-2" href="<%= root_path %>">
      <i class="fas fa-arrow-left fa-lg text-white"></i>
    </a>
    <h4 class="text-white">LOGIN</h4>
    <a id="login-link" class="nav-link text-white" href="#"><%= "Log in" %></a>
  </div>
</nav>

<div class="container-fluid">
  <%= form_for(resource, as: resource_name, url: session_path(resource_name), html: { class: "needs-validation", novalidate: true }) do |f| %>
    <div class="form-group">
      <%= f.email_field :email, autofocus: true, placeholder: "Email", autocomplete: "email", class: "form-control mt-2 mb-4", required: true %>
      <div class="invalid-feedback">
        Please enter a valid email.
      </div>
    </div>

    <div class="form-group">
      <%= f.password_field :password, placeholder: "Password", autocomplete: "current-password", class: "form-control mb-2", required: true %>
      <div class="invalid-feedback">
        Please enter your password.
      </div>
    </div>

    <% if devise_mapping.rememberable? %>
      <div class="form-group form-check">
        <%= f.check_box :remember_me, class: "form-check-input" %>
        <%= f.label :remember_me, class: "form-check-label" %>
      </div>
    <% end %>

    <%= f.submit "Log in", class: "d-none" %>
  <% end %>
</div>

<%= render "devise/shared/links" %>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const loginLink = document.getElementById("login-link");
    const loginForm = document.querySelector("form.needs-validation");

    if (loginLink && loginForm) {
      loginLink.addEventListener("click", function(event) {
        event.preventDefault();
        loginForm.submit();
      });
    }
  });
</script>
